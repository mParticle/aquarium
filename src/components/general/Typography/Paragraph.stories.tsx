import type { Meta } from '@storybook/react'
import type { StoryObj } from '@storybook/react'
import { Typography } from 'src/components/general/Typography/Typography'
import { ExampleStory } from 'src/utils/ExampleStory'
import { useMemo } from 'react'
import { useState } from 'react'
import { Radio } from 'src/components'
import { Switch } from 'src/components'
import { Slider } from 'src/components'
import { Icon } from 'src/components'
import { TypographyColors } from './colors'

const meta: Meta<typeof Typography.Paragraph> = {
  title: 'Components/General/Typography/Paragraph',
  component: props => <Typography.Paragraph {...props}>Paragraph text goes here</Typography.Paragraph>,
  args: {
    children: 'Example Text',
    type: undefined,
    color: undefined,
    size: 'base',
    code: false,
    copyable: false,
    delete: false,
    disabled: false,
    editable: false,
    ellipsis: false,
    mark: false,
    strong: false,
    italic: false,
    underline: false,
  },
  argTypes: {
    children: {
      control: 'text',
      name: 'text',
    },
    type: {
      control: 'select',
      options: ['secondary', 'success', 'warning', 'danger'],
    },
    size: {
      control: 'select',
      options: ['base', 'sm', 'lg', 'xl'],
    },
    color: {
      control: 'select',
      options: TypographyColors,
    },
    copyable: {
      control: 'boolean',
    },
    delete: {
      control: 'boolean',
    },
    disabled: {
      control: 'boolean',
    },
    editable: {
      control: 'boolean',
    },
    ellipsis: {
      control: 'boolean',
    },
    mark: {
      control: 'boolean',
    },
    strong: {
      control: 'boolean',
    },
    italic: {
      control: 'boolean',
    },
    code: {
      control: 'boolean',
    },
  },
}
export default meta

type Story = StoryObj<typeof Typography.Paragraph>

/*
  Initial story templates generated by AI.
  Customize the stories based on specific requirements.
*/

export const Primary: Story = {
  args: {
    code: false,
    delete: false,
  },
}

export const ExampleEditable: Story = {
  render: () => {
    const [editableStr, setEditableStr] = useState('This is an editable text.')
    const [editableStrWithSuffix, setEditableStrWithSuffix] = useState(
      'This is a loooooooooooooooooooooooooooooooong editable text with suffix.',
    )
    const [editableStrWithSuffixStartPart, editableStrWithSuffixSuffixPart] = useMemo(
      () => [editableStrWithSuffix.slice(0, -12), editableStrWithSuffix.slice(-12)],
      [editableStrWithSuffix],
    )
    const [customIconStr, setCustomIconStr] = useState('Custom Edit icon and replace tooltip text.')
    const [clickTriggerStr, setClickTriggerStr] = useState('Text or icon as trigger - click to start editing.')
    const [chooseTrigger, setChooseTrigger] = useState<Array<'icon' | 'text'>>(['icon'])
    const [customEnterIconStr, setCustomEnterIconStr] = useState(
      'Editable text with a custom enter icon in edit field.',
    )
    const [noEnterIconStr, setNoEnterIconStr] = useState('Editable text with no enter icon in edit field.')
    const [hideTooltipStr, setHideTooltipStr] = useState('Hide Edit tooltip.')
    const [lengthLimitedStr, setLengthLimitedStr] = useState('This is an editable text with limited length.')

    const radioToState = (input: string): Array<'icon' | 'text'> => {
      switch (input) {
        case 'text':
          return ['text']
        case 'both':
          return ['icon', 'text']
        case 'icon':
        default:
          return ['icon']
      }
    }

    const stateToRadio = useMemo<string>(() => {
      if (chooseTrigger.includes('text')) {
        return chooseTrigger.includes('icon') ? 'both' : 'text'
      }
      return 'icon'
    }, [chooseTrigger])

    return (
      <ExampleStory title="Make Typography editable.">
        <Typography.Paragraph editable={{ onChange: setEditableStr }}>{editableStr}</Typography.Paragraph>
        <Typography.Paragraph
          editable={{
            onChange: setEditableStrWithSuffix,
            text: editableStrWithSuffix,
          }}
          ellipsis={{
            suffix: editableStrWithSuffixSuffixPart,
          }}>
          {editableStrWithSuffixStartPart}
        </Typography.Paragraph>
        <Typography.Paragraph
          editable={{
            icon: <Icon name="mpLogo" />,
            tooltip: 'click to edit text',
            onChange: setCustomIconStr,
          }}>
          {customIconStr}
        </Typography.Paragraph>
        Trigger edit with:{' '}
        <Radio.Group
          onChange={e => {
            setChooseTrigger(radioToState(e.target.value as string))
          }}
          value={stateToRadio}>
          <Radio value="icon">icon</Radio>
          <Radio value="text">text</Radio>
          <Radio value="both">both</Radio>
        </Radio.Group>
        <Typography.Paragraph
          editable={{
            tooltip: 'click to edit text',
            onChange: setClickTriggerStr,
            triggerType: chooseTrigger,
          }}>
          {clickTriggerStr}
        </Typography.Paragraph>
        <Typography.Paragraph
          editable={{
            icon: <Icon name="mpLogo" />,
            tooltip: 'click to edit text',
            onChange: setCustomEnterIconStr,
            enterIcon: <Icon name="mpLogo" />,
          }}>
          {customEnterIconStr}
        </Typography.Paragraph>
        <Typography.Paragraph
          editable={{
            icon: <Icon name="mpLogo" />,
            tooltip: 'click to edit text',
            onChange: setNoEnterIconStr,
            enterIcon: null,
          }}>
          {noEnterIconStr}
        </Typography.Paragraph>
        <Typography.Paragraph editable={{ tooltip: false, onChange: setHideTooltipStr }}>
          {hideTooltipStr}
        </Typography.Paragraph>
        <Typography.Paragraph
          editable={{
            onChange: setLengthLimitedStr,
            maxLength: 50,
            autoSize: { maxRows: 5, minRows: 3 },
          }}>
          {lengthLimitedStr}
        </Typography.Paragraph>
      </ExampleStory>
    )
  },
}

export const ExampleCopyable: Story = {
  render: () => {
    return (
      <ExampleStory title="Make Typography copyable.">
        <Typography.Paragraph copyable>This is a copyable text.</Typography.Paragraph>
        <Typography.Paragraph copyable={{ text: 'Hello, Ant Design!' }}>Replace copy text.</Typography.Paragraph>
        <Typography.Paragraph
          copyable={{
            icon: [<Icon name="mpLogo" key={1} />, <Icon name="mpLogo" key={2} />],
            tooltips: ['click here', 'you clicked!!'],
          }}>
          Custom Copy icon and replace tooltips text.
        </Typography.Paragraph>
        <Typography.Paragraph copyable={{ tooltips: false }}>Hide Copy tooltips.</Typography.Paragraph>
      </ExampleStory>
    )
  },
}

export const ExampleEllipsis: Story = {
  render: () => {
    const [ellipsis, setEllipsis] = useState(true)
    return (
      <ExampleStory title="Multiple line ellipsis support. You can use tooltip to config ellipsis tooltip. Recommend expandable when have lots of content.">
        <Switch
          checked={ellipsis}
          onChange={() => {
            setEllipsis(!ellipsis)
          }}
        />
        <Typography.Paragraph ellipsis={ellipsis}>
          Ant Design, a design language for background applications, is refined by Ant UED Team. Ant Design, a design
          language for background applications, is refined by Ant UED Team. Ant Design, a design language for background
          applications, is refined by Ant UED Team. Ant Design, a design language for background applications, is
          refined by Ant UED Team. Ant Design, a design language for background applications, is refined by Ant UED
          Team. Ant Design, a design language for background applications, is refined by Ant UED Team.
        </Typography.Paragraph>

        <Typography.Paragraph ellipsis={ellipsis ? { rows: 2, expandable: true, symbol: 'more' } : false}>
          Ant Design, a design language for background applications, is refined by Ant UED Team. Ant Design, a design
          language for background applications, is refined by Ant UED Team. Ant Design, a design language for background
          applications, is refined by Ant UED Team. Ant Design, a design language for background applications, is
          refined by Ant UED Team. Ant Design, a design language for background applications, is refined by Ant UED
          Team. Ant Design, a design language for background applications, is refined by Ant UED Team.
        </Typography.Paragraph>
      </ExampleStory>
    )
  },
}

export const ExampleSuffix: Story = {
  render: () => {
    const [rows, setRows] = useState(1)

    const article =
      "To be, or not to be, that is a question: Whether it is nobler in the mind to suffer. The slings and arrows of outrageous fortune Or to take arms against a sea of troubles, And by opposing end them? To die: to sleep; No more; and by a sleep to say we end The heart-ache and the thousand natural shocks That flesh is heir to, 'tis a consummation Devoutly to be wish'd. To die, to sleep To sleep- perchance to dream: ay, there's the rub! For in that sleep of death what dreams may come When we have shuffled off this mortal coil, Must give us pause. There 's the respect That makes calamity of so long life"
    return (
      <ExampleStory title="Add suffix ellipsis support.">
        <Slider value={rows} min={1} max={10} onChange={setRows} />
        <Typography.Paragraph
          ellipsis={{
            rows,
            expandable: true,
            suffix: '--William Shakespeare',
            onEllipsis: ellipsis => {
              console.log('Ellipsis changed:', ellipsis)
            },
          }}
          title={`${article}--William Shakespeare`}>
          {article}
        </Typography.Paragraph>
      </ExampleStory>
    )
  },
}
